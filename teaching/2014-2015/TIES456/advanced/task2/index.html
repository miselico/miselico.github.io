
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Advanced task TIES532 - Bus travel (Service Composition - Cloud computing) - Michael Cochez</title>
  <meta name="author" content="">

  
  <meta name="description" content=" ">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="https://www.cochez.nl/teaching/2014-2015/TIES456/advanced/task2/">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="" rel="alternate" title="Michael Cochez" type="application/atom+xml">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
  <script>!window.jQuery && document.write(unescape('%3Cscript src="./javascripts/libs/jquery.min.js"%3E%3C/script%3E'))</script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="//fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="//fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-54043599-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>


</head>

<body   class="no-sidebar"  >
  <header role="banner"><hgroup>
  <h1><a href="/">Michael Cochez</a></h1>
  
    <h2>Assistant Professor at Vrije Universiteit Amsterdam</h2>
  
</hgroup>

</header>
  <nav role="navigation"><!--
<ul class="subscription" data-subscription="rss">
  <li><a href="" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
-->
  
<ul class="main-navigation">
  <li><a href="/">Home</a></li>
  <li><a href="/research/">Research</a></li>
  <li><a href="/teaching/">Teaching</a></li>  
  <li><a href="/software/">Software</a></li>
  <li><a href="/contact/">Contact</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div>
<article role="article">
  
  <header>
    <h1 class="entry-title">Advanced task TIES532 - Bus travel (Service Composition - Cloud computing)</h1>
    
  </header>
  
  <h2 id="goal">Goal</h2>
<p>The goal of this task is to get to use different APIs of service providers and create an integrated service.
The integrated service will run in the premises of a Cloud service provider.
You will also have to adapt yourself to the storage and caching options provided.</p>

<h2 id="prerequisites">Prerequisites</h2>
<p>You must have understood the tasks related to web service clients and web service servers.
Also the skills learned from deploying applications will come in handy.
The material which was prerequisite for those exercises is also needed for this exercise.
Since you are free to choose the environment and tooling used in this exercise, you will need to search documentation as needed.
Check whether the tools and platform you are selecting have associated costs.
You can use the budget provided by amazon for this exercise.</p>

<p>When you are working in a pair, you need to use protocol buffers and snappy for communication with one of the services.
In that case, read about protocol buffers from <a href="https://developers.google.com/protocol-buffers/">https://developers.google.com/protocol-buffers/</a>. 
There are implementations for many languages available (See <a href="http://code.google.com/p/protobuf/wiki/ThirdPartyAddOns">ThirdPartyAddOns</a>).
Also read about the basic idea of Snappy (former Zippy) from <a href="http://code.google.com/p/snappy/">http://code.google.com/p/snappy/</a>. 
If you are planning to use Java for this task you could use the Java implementation from <a href="https://github.com/xerial/snappy-java">https://github.com/xerial/snappy-java</a>. 
Remark : this library does not seem to work on GAE since it uses native code.
<a href="https://github.com/dain/snappy">https://github.com/dain/snappy</a> works on GAE, but does not have streaming capabilities.</p>

<p>If you are really interested in the multiple coordinate systems in use in Finland, you could check <a href="http://www.kolumbus.fi/eino.uikkanen/geodocsgb/ficoords.htm">http://www.kolumbus.fi/eino.uikkanen/geodocsgb/ficoords.htm</a>.</p>

<h2 id="task">Task</h2>
<p>You have to create a website which helps people to be in time.
Concrete, you create a page which displays how much time the user has left before he has to leave to make it to the next event.</p>

<p>A user must be able to log-in to your service. 
Then he can provide his timezone information and a URL for his calendar information.
The provided information must be stored persistently on your server (in some sort of database).</p>

<p>Then, the user can navigate to a page which shows how much time he has left before he should leave to make it to the next event in his calendar.
The page also shows information about the first stage of the journey.
This beginning of the journey is based on the location of the user as provided by the browser and the current time.
The end of the journey is based on the location information attached to the next event and its start time.
The user is supposed to use public transportation means, walking and cycling only.</p>

<p>You have the following resources available:</p>

<ul>
  <li>A service providing routing information in Finland
    <ul>
      <li>matka.fi provides a RESTful API <a href="http://developer.matka.fi/pages/en/home.php">http://developer.matka.fi/pages/en/home.php</a>
        <ul>
          <li>More specifically <a href="http://developer.matka.fi/pages/en/http-get-interface/routing.php">coordinate based routing</a></li>
        </ul>
      </li>
      <li><strong>Careful</strong> : the coordinate system used is KKJ3 which needs to converted for compatibility with other systems.</li>
      <li>KKJ3 is KKJ with zone equal to three. Even if the location in question is not in Zone 3.</li>
    </ul>
  </li>
  <li>One service providing an iCal calendar
    <ul>
      <li>This is provided by the users by URL
        <ul>
          <li>Be careful using user provided URLs, they tend to try to crash your service.</li>
        </ul>
      </li>
      <li>One example you can use is your own korppi calendar (see <a href="https://korppi.jyu.fi/kotka/servlet/calendar/export/ui/ical/">iCal on korppi</a>).</li>
    </ul>
  </li>
  <li>A GeoConversion library written in Java to convert between KKJ3 and WSG-84 coordinate systems.
    <ul>
      <li><a href="GeoConverter.zip">provided by the teacher</a></li>
      <li>There is also a Python library available (File /coordinates.py in the archive found from  <a href="http://olammi.iki.fi/sw/fetch_map/download.php">http://olammi.iki.fi/sw/fetch_map/download.php</a>)</li>
      <li>When using other languages, you have to create a small service to do the conversion.</li>
    </ul>
  </li>
  <li>A tool for converting University classrooms to locations
    <ul>
      <li>If you work alone: a <a href="BuildingLocator.jar">library</a>. This library also contains example code.</li>
      <li>If you work in a pair : as a service (see below).</li>
    </ul>
  </li>
  <li>The browsers GeoLocation javascript API
    <ul>
      <li>You can assume that only modern browsers having this feature are used.</li>
      <li>Use <a href="http://www.w3.org/TR/geolocation-API/#watch-position">watchposition</a> so that your site gets updated about changes in the location.</li>
    </ul>
  </li>
  <li>A time source
    <ul>
      <li>You should make a decision about this one yourself
        <ul>
          <li>Can you trust the browser’s time?</li>
          <li>Can you trust the server’s time?</li>
          <li>In what time-zone is the server? The user?
&lt;!–</li>
          <li>Do you account for daylight saving time?</li>
          <li>How much precision is enough?
students get too much confused about these.
–&gt;</li>
        </ul>
      </li>
    </ul>
  </li>
  <li>User information
    <ul>
      <li>an iCal calendar URL</li>
      <li>Timezone</li>
    </ul>
  </li>
</ul>

<p>You are free to use a platform and tooling of your choice. You have to deploy the service so that it is accessible trough the Internet.</p>

<p><em>Optional</em>: If the application does not know the coordinates for the location, it can ask the user to specify them (for instance using a map) or you could query a geocoding service provider.</p>

<h2 id="additions-if-the-work-is-performed-in-a-group-of-two-persons">Additions if the work is performed in a group of two persons</h2>
<ul>
  <li>You need to add support for having multiple iCal calendars.</li>
  <li>The user can specify what his walking/cycling speed is. This value must be taken into account when doing the routing requests.
    <ul>
      <li>slow (30m/min)</li>
      <li>normal (70m/min)</li>
      <li>fast (100m/min)</li>
      <li>running (200m/min)</li>
      <li>cycling (300m/min)</li>
    </ul>
  </li>
  <li>You need to implement caching of the calendars using <a href="http://memcached.org/">memcached</a> or <a href="https://github.com/golang/groupcache">groupcache</a>
    <ul>
      <li>Only cache the necessary parts and do not use too old data (you might need to use time stamps).</li>
      <li>You can use provided services to make your life easier (GAE, Heroku, and other providers have free memcache options).</li>
    </ul>
  </li>
  <li>You cannot use the library to convert between university classrooms and locations. 
Instead you need to use the service which is available from <a href="#">http://jyulocation.appspot.com/locate/{location}</a>
This is a restful service which does not use xml or json. Opening a URI like <a href="http://jyulocation.appspot.com/locate/Ag%20Alfa">http://jyulocation.appspot.com/locate/Ag%20Alfa</a> will result in a binary result.
Instead of JSON or XML, the server is using protocol buffers compressed using snappy which are served over http.
The protocol buffer schema can be found from <a href="location.prot">location.prot</a>.
You need to compile this schema using the protoc tool to communicate with the service.
Example code on how to convert data received from this service can be found from <a href="Client.java">Client.java</a>.
Also use a caching strategy for this service.
The strategy will be different compared to the calendar caching since the information served is static (does not expire).</li>
  <li>Instead of only creating a web page which displays the information, you also have to make a browser extension which shows the time of the next departure.</li>
</ul>

<p><em>Optional:</em> Allow the user to log in using OpenID. Do not implement this yourself, use existing frameworks and services.</p>

<!--
* You have to use https for the communication from your server to the client. (Free on GAE)
* Make a multilingual website. (character encoding!)
* GAE specific
    * Use the users authentication
    * Google chrome plug-in
-->

<h3 id="returning-the-task">Returning the task###</h3>
<ul>
  <li>The project needs to be pushed to a separate git repository.</li>
  <li>Add the teacher (user name:miselico) as a collaborator to the repo.</li>
  <li>Add a README.txt or README.md file to the root of your repo in which you document your choices and the authors.</li>
  <li>You need to arrange a meeting with the teacher to show the task.</li>
</ul>

<!--
Hints
-----
-->


  
    <footer>
      
      
        <div class="sharing">
  
  
  
</div>

      
    </footer>
  
</article>

</div>


    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2025 - Michael Cochez -
  <span class="credit">Powered by Jekyll. Derived from Octopress.</span>
</p>

</footer>
  











</body>
</html>
